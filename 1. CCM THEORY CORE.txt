================================================================================
COMMIT-CENTRIC MODEL (CCM): ЯДРО
Где физическая реальность фиксируется как история фактов
================================================================================
Версия: v4.8.0 (RU core)
Дата: Декабрь 2025
================================================================================


АННОТАЦИЯ
---------
CCM задаёт двухслойную онтологию.

(1) Bulk — слой возможностей: альтернативы описываются комплексными амплитудами
    в гильбертовом пространстве и унитарной эволюцией по внутреннему параметру τ.

(2) Commit — слой фактов: необратимая фиксация одного исхода как Fact,
    записанного в FactLog. Наблюдаемый мир отождествляется с FactLog.

Ядро построено на структурных ограничениях:
- Bulk — комплексное гильбертово пространство; ортогональность — примитив.
- Композиция историй + замкнутость Bulk фиксируют форму амплитуд.
- Локальная phase gauge требует U(1)-связности; физика зависит только от holonomy.
- DI-refinement (ортогональное расщепление) фиксирует p=2 (Born weight).
- Commit law задаёт пуассоновский stopping-time процесс.
- Физическое время — статистика записей часов в FactLog, не параметр τ.
- Тензорная структура и CPTP дают no-signalling.


ОГЛАВЛЕНИЕ
----------
0. Термины и нотация
1. Онтология: Bulk vs Commit
2. Bulk: пространство, состояния, истории, амплитуды, U(1)-связность
3. DI axiom и DI-knife
4. Вероятность Commit: Born weight и Commit law
5. Время: τ, FactLog, часы
6. Тензорная структура, корреляционная близость, мультипликативность
7. CPTP, Environment, no-signalling
8. DI-knife: запрещённые конструкции
9. Outcomes: record → Instrument → POVM
10. Интерфейсы к слоям
11. Статус


================================================================================
0. ТЕРМИНЫ И НОТАЦИЯ
================================================================================

Bulk        Слой возможностей. Комплексное гильбертово пространство H,
            унитарная эволюция по параметру τ.

Commit      Необратимая фиксация одного outcome как Fact.

Fact        Зафиксированный результат Commit. Существует только в FactLog.

FactLog     Упорядоченная последовательность Facts. Реальность = FactLog.

τ           Bulk-параметр. Внутренняя параметризация унитарной динамики.
            Не является физическим временем; не наблюдаем напрямую.

n           Индекс записи в FactLog. Порядок Commits. Это факт.
            Фиксирует порядок записей в выбранной линейной записи FactLog.
            Причинный порядок для timelike/null — DI-инвариантен;
            порядок spacelike — gauge по (D4).

DI          Description Invariance. Статистика Fact инвариантна к описанию.

DI-knife    Критерий отсечения: зависит от описания → не Fact.

Instrument  Семейство CP maps {M_v}, где Σ_v M_v — CPTP.

POVM        Производный объект: E_v = M_v*(I).

CPTP        Completely positive, trace-preserving maps.

Holonomy    Фазовый инвариант по замкнутой петле: Φ_C = Σ_{e∈C} a(e).

Нотация:
H           Гильбертово пространство Bulk (комплексное, сепарабельное)
|ψ⟩         Bulk-состояние (вектор в H)
ρ           Density matrix
V           Множество альтернатив (узлов) — fine-grained
Ω           Множество outcomes — coarse-graining V по классам записи
Π_v         Projector на подпространство, соответствующее outcome v
Tr          Trace
⊗           Тензорное произведение
ℏ           Постоянная Планка (явно во всех фазах)


================================================================================
1. ОНТОЛОГИЯ: BULK VS COMMIT
================================================================================

1.1. Два слоя
-------------
Bulk содержит альтернативы и их амплитуды, но не содержит Facts.
Commit фиксирует один outcome и создаёт Fact.

1.2. Реальность как FactLog
---------------------------
Наблюдаемое отождествляется с FactLog: упорядоченной последовательностью
зафиксированных Facts. Это онтологическое утверждение:

    Реальность = то, что зафиксировано необратимо.

1.3. Где живёт вероятность
--------------------------
Вероятность относится к Commit, не к Bulk.
Bulk задаёт амплитуды и интерференцию; статистика Facts — на уровне Commit.


================================================================================
2. BULK: ПРОСТРАНСТВО, СОСТОЯНИЯ, ИСТОРИИ, АМПЛИТУДЫ, U(1)-СВЯЗНОСТЬ
================================================================================

2.1. Пространство Bulk
----------------------
Постулат (структура Bulk):
    Bulk — комплексное сепарабельное гильбертово пространство H.
    Ортогональность — примитив структуры.

Bulk-состояние — нормированный вектор:

    |ψ⟩ ∈ H,    ⟨ψ|ψ⟩ = 1.

Множество альтернатив V задаёт базис или разложение единицы в H.
Амплитуда альтернативы v:

    ψ(v) = ⟨v|ψ⟩ ∈ ℂ.

2.2. Gauge-структура
--------------------
Глобальная gauge: |ψ⟩ и e^{iθ}|ψ⟩ — одна физическая ситуация.

Локальная gauge: ψ(v) → e^{iθ(v)} ψ(v) для произвольной θ: V → ℝ.

Чтобы когерентная сумма по путям была gauge-инвариантной, необходима
U(1)-связность: phase increment a(u→v) на каждом ориентированном ребре,
с трансформацией:

    a'(u→v) = a(u→v) + θ(u) − θ(v).

DI-инвариант: только holonomy Φ_C = Σ_{e∈C} a(e) по замкнутым петлям
влияет на статистику Fact. Отдельные a(e) — gauge-зависимы и ненаблюдаемы.

Anchor: T09_aharonov_bohm.py

2.3. Истории и действие
-----------------------
История H — последовательность альтернатив: H = (v₀ → v₁ → ... → vₙ).
Композиция историй: если H₂ начинается там, где заканчивается H₁,
определена склейка H = H₁ ∘ H₂.

Каждая история несёт вещественное действие S[H] с аддитивностью:

    S[H₁ ∘ H₂] = S[H₁] + S[H₂].

2.4. Амплитуды: форма и модуль
------------------------------
Амплитуда истории имеет общий вид:

    A(H) = μ(H) · exp(i S[H] / ℏ),

где μ(H) — вещественная мера (вес) истории, а фаза определяется действием.

Постулат (замкнутость Bulk):
    В замкнутом Bulk (без взаимодействия с Environment) мера нормируема
    и может быть поглощена в определение суммы по историям.
    Эффективно: |A(H)| = const для историй одного класса.

Теорема (единственность фазы):
    Требования к фазе φ(H):
    (a) φ(H₁ ∘ H₂) = φ(H₁) + φ(H₂)  — аддитивность
    (b) Непрерывность по S
    
    Единственное решение: φ(H) = S[H] / ℏ + const.

Доказательство. Функциональное уравнение φ(S₁+S₂) = φ(S₁) + φ(S₂)
с непрерывностью имеет единственное решение φ(S) = c·S. Калибровка c = 1/ℏ. ∎

2.5. Полная амплитуда с U(1)-связностью
---------------------------------------
Амплитуда пути с учётом phase increments:

    A(H) = exp(i [S[H]/ℏ + Σ_{edges∈H} a(e)]).

2.6. Когерентная сумма и интерференция
--------------------------------------
Если несколько историй ведут к одной альтернативе v:

    ψ(v) = Σ_{H→v} A(H).

Это сумма комплексных чисел. Результат может быть меньше любого слагаемого
(деструктивная интерференция) или больше (конструктивная).

Интерференция — структурное следствие когерентного суммирования амплитуд
в гильбертовом пространстве.

2.7. Унитарная Bulk-эволюция
----------------------------
Между Commit-событиями Bulk эволюционирует унитарно по параметру τ:

    |ψ(τ)⟩ = exp(-i H τ / ℏ) |ψ(0)⟩,    H = H†.

τ — внутренний параметр динамики, не физическое время.
Физическое время определяется в секции 5.


================================================================================
3. DI AXIOM И DI-KNIFE
================================================================================

3.1. DI axiom (Description Invariance)
--------------------------------------
Статистика Fact не может зависеть от чисто описательных преобразований.
Если зависит — заявленный Fact не определён физически.

3.2. Класс описательных преобразований
--------------------------------------
(D1) Переименование outcomes (перестановка меток)
(D2) Refinement/coarse-graining без новой физики записи
(D3) Изменение вычислительной дискретизации (параметр N)
(D4) Перестановка spacelike-несвязанных Commit-порядков
(D5) Gauge-преобразование θ(v) на узлах

3.3. DI-knife
-------------
Если существует описательная ручка, меняющая распределение заявленного Fact,
модель нарушает DI. Такой "Fact" отсекается.


================================================================================
4. ВЕРОЯТНОСТЬ COMMIT: BORN WEIGHT И COMMIT LAW
================================================================================

4.1. Связь V и Ω
----------------
V — множество fine-grained альтернатив (узлов в Bulk).
Ω — множество outcomes, наблюдаемых при Commit.

Связь: outcome v ∈ Ω — это класс эквивалентности альтернатив,
определяемый физикой записи (record). Формально:

    v ∈ Ω  соответствует  подпространству H_v ⊂ H,
    Π_v — projector на H_v,
    H = ⊕_{v∈Ω} H_v  (ортогональное разложение).

Born weight определён на Ω через проекторы:

    w_v(ψ) = ||Π_v |ψ⟩||² = ⟨ψ|Π_v|ψ⟩.


4.2. Описательный vs физический refinement
------------------------------------------
ОПРЕДЕЛЕНИЕ (Описательный refinement):

Refinement Π_A = Σ_j Π_{A_j} является ОПИСАТЕЛЬНЫМ тогда и только тогда,
когда записи подклассов физически неразличимы для Environment:

    max_{j≠k} ||r_j - r_k||_E < ε_E

где ||·||_E — норма различимости в Environment, ε_E — порог.

Эквивалентная формулировка:
Environment не может определить, какой именно подкласс A_j реализовался.
Информация о j не записана — только факт "A произошло".

ОПРЕДЕЛЕНИЕ (Физический refinement):

Refinement является ФИЗИЧЕСКИМ, если записи подклассов ортогональны:

    ⟨r_j|r_k⟩_E ≈ 0  для j ≠ k.

Environment различает подклассы. Каждый A_j — отдельный Fact.


4.3. DI-refinement фиксирует p = 2
----------------------------------
Рассмотрим веса w(A|ψ) = ||Π_A ψ||^p для некоторого p > 0.

При ОПИСАТЕЛЬНОМ refinement Π_A = Σ_j Π_{A_j}:
- Подпространства H_{A_j} ортогональны (структура Bulk)
- Записи неразличимы (нет новой информации в FactLog)

DI требует: P(A) = Σ_j P(A_j).

Для нормированных вероятностей P(A) = w(A) / Σ w это эквивалентно:

    ||Π_A ψ||^p = Σ_j ||Π_{A_j} ψ||^p.

ТЕОРЕМА (Born exponent).
В гильбертовом пространстве ортогональная аддитивность ||Π ψ||^p
выполняется для всех ψ тогда и только тогда, когда p = 2.

Доказательство.
(⟹) Для p = 2: ||Π_A ψ||² = ||Σ_j Π_{A_j} ψ||² = Σ_j ||Π_{A_j} ψ||²
    (теорема Пифагора для ортогональных векторов).

(⟸) Контрпример для p ≠ 2:
    Пусть |ψ⟩ = (|1⟩ + |2⟩)/√2, где |1⟩, |2⟩ — ортонормированные.
    Π_A = |1⟩⟨1| + |2⟩⟨2|, Π_{A_1} = |1⟩⟨1|, Π_{A_2} = |2⟩⟨2|.
    
    ||Π_A ψ||^p = 1^p = 1.
    ||Π_{A_1} ψ||^p + ||Π_{A_2} ψ||^p = (1/√2)^p + (1/√2)^p = 2^{1-p/2}.
    
    Равенство 1 = 2^{1-p/2} ⟺ p = 2. ∎

Anchor: T01B_DI_refinement_p_sweep.py


4.4. DI-segmentation фиксирует экспоненциальный survival
--------------------------------------------------------
Рассмотрим бинарный Fact:

    F_Δτ := "на интервале bulk-параметра длины Δτ Commit не произошёл".

Определим survival-функцию:

    S(Δτ) := Pr(F_Δτ).

ПРИНЦИП (DI-segmentation):
Разбиение интервала Δτ на подинтервалы Δτ₁ + Δτ₂ является описательным,
если внутри нет Facts (нет Commits). Следовательно:

    S(Δτ₁ + Δτ₂) = S(Δτ₁) · S(Δτ₂).

Граничные условия:
    S(0) = 1,
    S непрерывна,
    0 < S(Δτ) ≤ 1.

ТЕОРЕМА (Экспоненциальный survival).
Единственное решение функционального уравнения f(x+y) = f(x)f(y)
с f(0) = 1, f непрерывна, 0 < f ≤ 1:

    S(Δτ) = exp(-λ · Δτ)    для некоторого λ ≥ 0.

Доказательство.
Логарифмируем: ln S(x+y) = ln S(x) + ln S(y).
Обозначим g(x) = ln S(x). Тогда g(x+y) = g(x) + g(y), g(0) = 0.
Единственное непрерывное решение: g(x) = cx для константы c.
Из S ≤ 1 следует c ≤ 0. Обозначим λ = -c ≥ 0. ∎

Anchor: T25_SV_DI_survival_exponential.py


4.5. Иерархия hazard-параметров
-------------------------------
ОПРЕДЕЛЕНИЕ (Hazard hierarchy):

(a) λ_I — hazard rate Instrument I — определяется:

    λ_I = η · ω_record

	где:
	- ω_record — характерная частота record-подсистемы
	- η ∈ (0,1] — эффективность coupling между S и record

	η — эмпирический параметр конкретного Instrument.
	Определяется физикой взаимодействия S-record, не выбором описания.

	Пределы:
	- η → 1 (идеальный coupling):  λ_I → ω_record
	- η << 1 (слабый coupling):    λ_I << ω_record


(b) λ_local(x) — пространственно-модулированный hazard (Gravity layer):
    
        λ_local(x) = T(x) · λ_I,
    
    где T(x) ∈ (0,1] — lapse function.
    Это СВОЙСТВО места × прибора.

ЗАМЕЧАНИЕ:
Секция 4.4 устанавливает экспоненциальную ФОРМУ survival.
Конкретное значение λ_I определяется физикой Instrument.


4.6. Commit law: полная формулировка
------------------------------------
Пусть состояние перед Commit — ρ(τ), Instrument — I = {M_v}_{v∈Ω}.

(1) SURVIVAL: Вероятность отсутствия Commit на интервале Δτ:
    
        S_I(Δτ) = exp(-λ_I · Δτ).

(2) BORN SELECTION: При наступившем Commit распределение outcome:
    
        P(v | ρ, Commit) = Tr(M_v(ρ)) = Tr(E_v ρ),
    
    где E_v = Σ_α K_{v,α}† K_{v,α} — POVM element.

(3) POST-COMMIT STATE:
    
        ρ(τ⁺) = M_v(ρ(τ)) / Tr(M_v(ρ(τ))).

ЭКВИВАЛЕНТНАЯ ИНТЕНСИВНОСТНАЯ ФОРМА:
Для малого dτ:

    Pr[Commit в (τ, τ+dτ) с outcome v | ρ(τ)] = λ_I · Tr(E_v ρ(τ)) · dτ + o(dτ).


4.7. Record speed limit
-----------------------
ПРИНЦИП: Tick-outcome требует физически различимой записи.

Пусть record-подсистема R имеет начальное состояние |r₀⟩.
Fidelity с начальным состоянием:

    F(τ) := |⟨r₀|r(τ)⟩|².

КОНВЕНЦИЯ (Порог различимости):
    
    δ := 1/e ≈ 0.368    (один e-fold декогеренции).

ОПРЕДЕЛЕНИЕ (Минимальное время записи):
    
    τ_min := inf{τ ≥ 0 : F(τ) ≤ δ}.

СЛЕДСТВИЕ:
Tick как физический outcome допускается только после τ_min.
Модели с tick-facts быстрее τ_min описывают нефизический outcome
(запись не успела стать различимой).

ПРОТОТИП (Двухуровневая запись):
H_R = (ℏΩ/2)σ_x, |r₀⟩ = |0⟩.

    |r(τ)⟩ = cos(Ωτ/2)|0⟩ - i sin(Ωτ/2)|1⟩,
    F(τ) = cos²(Ωτ/2),
    τ_min = 2·arccos(√δ)/Ω.

При δ = 1/e: τ_min ≈ 1.84/Ω.

SI-ФОРМА:

    τ_min = 1.84 ℏ / ΔE_record

где ΔE_record = ℏΩ — энергетический зазор record-системы.

CCM-СПЕЦИФИЧНОСТЬ:
τ_min определяется ДЕТЕКТОРОМ (record-system), не измеряемой системой.
Это отличает CCM от стандартных quantum speed limits (Mandelstam-Tamm),
которые привязаны к ΔE_system.

Anchor: T24_SV_commit_rate_record_speed_limit.py
        T35_SV_record_speed_limit_detector_dependence.py

================================================================================
5. ВРЕМЯ: τ, FACTLOG, ЧАСЫ
================================================================================

5.1. Три понятия времени
------------------------
CCM строго различает три понятия:

(1) τ — bulk-параметр
    Внутренняя параметризация унитарной динамики.
    СТАТУС: gauge-параметр (см. 5.2).

(2) n — индекс в FactLog
    Порядковый номер записи: Fact₁, Fact₂, ..., Factₙ.
    СТАТУС: Fact (для timelike/null цепочек). Для spacelike событий порядок — описательный (D4).

(3) Физическое время — показания часов
    Статистика tick-outcomes в FactLog.
    СТАТУС: производная величина (см. 5.4).


5.2. τ как gauge-параметр
-------------------------
ТЕОРЕМА T4 (τ-инвариантность наблюдаемых).

Все физические предсказания CCM — функции от:
  - FactLog (последовательность n, outcomes)
  - Отношений частот ω_A/ω_B
  - Отношений lapse T(x₁)/T(x₂)

Абсолютные значения τ не входят ни в одно предсказание.

Доказательство (проверка по формулам):

• Redshift: z = T_emit/T_obs - 1           — отношение T, не τ
• Born: P(v) = Tr(E_v ρ)                   — состояние ρ, не τ
• Survival: S(Δτ) = exp(-λΔτ)              — но Δτ измеряется как...

Ключевое наблюдение: Δτ между Commits n₁ и n₂ не измеряется напрямую.
Измеряется ОТНОШЕНИЕ: сколько тиков часов-A vs часов-B.

    N_A / N_B = λ_A / λ_B = ω_A / ω_B.

τ сокращается.

• Shapiro delay: Δt = ∫(1/T - 1)dx/c       — интеграл по x, не τ
• Корреляции: P(A,B|ρ)                     — не зависит от τ

СЛЕДСТВИЕ:
τ — gauge-параметр, аналогичный affine parameter геодезической.
Репараметризация τ → f(τ) при монотонной f не меняет физику.

τ НЕ является hidden variable:
- Hidden variable влияет на наблюдаемые
- τ не влияет (все наблюдаемые — τ-инварианты)


5.3. Порядок n и необратимость
------------------------------
Каждый Commit добавляет запись в FactLog с индексом n.
"Раньше/позже" означает "меньший/больший n".

Между Commit-событиями:
- Есть Bulk-эволюция по τ
- Нет Facts
- Нет физического времени (нет тиков)

ПОСТУЛАТ P5 (Необратимость Commit):
Commit увеличивает энтропию Environment:

    S_vN(ρ_E | post-Commit) > S_vN(ρ_E | pre-Commit).

Порядок n в FactLog согласован с порядком энтропии:
    
    n₁ < n₂  ⟹  S(E|n₁) ≤ S(E|n₂).

ОБОСНОВАНИЕ (типичность, не вывод из унитарности):
P5 не следует из одной только Bulk-унитарности (обратимой по построению),
но является статистически-типичным утверждением для большого Environment.

Интуиция:
1) Environment имеет огромную размерность: dim(H_E) >> 1.
2) Commit означает физическую запись (record) в E, то есть корреляцию
   с макроскопически различимыми состояниями E.
3) В типичной динамике большого E такие корреляции рассеиваются по
   множеству степеней свободы (энтропийное “расползание” информации).
4) Обратный ход (стирание записи) требует возврата E в крайне малую область
   пространства состояний, что статистически подавлено ~ exp(-ΔS).

По статусу это тот же класс утверждений, что “второй закон термодинамики”:
не геометрическая тождественность, а структурное/типичностное условие на E.

5.4. Часы как Instrument
------------------------
Часы — физическая система с Instrument, outcomes которого — {tick, wait}.

МОДЕЛЬ (Двухуровневые часы):

    |ψ(τ)⟩ = cos(ωτ)|0⟩ + sin(ωτ)|1⟩

Instrument: M_tick(ρ) = |1⟩⟨1| ρ |1⟩⟨1|, M_wait(ρ) = |0⟩⟨0| ρ |0⟩⟨0|.
Born weight: w_tick(τ) = sin²(ωτ).
Hazard: λ_tick(τ) = λ_clock · sin²(ωτ), где λ_clock ~ ω.

ФИЗИЧЕСКОЕ ВРЕМЯ:
Определяется статистикой tick-записей в FactLog.
"Прошла 1 секунда" = "зафиксировано N_Cs тиков цезиевых часов",
где N_Cs = 9192631770 (определение SI).


5.5. Период часов: асимптотики
------------------------------
Survival probability до момента τ (вероятность, что Commit не произошёл):

    S(τ) = exp(-λ ∫₀^τ sin²(ωs) ds).

Среднее значение τ до первого тика:

    ⟨τ_tick⟩ = ∫₀^∞ τ · λ sin²(ωτ) · S(τ) dτ.

Асимптотические режимы (численно верифицированы):

    λ << ω (Commit-limited):  ⟨τ_tick⟩ ≈ 2/λ
    λ ~ ω  (резонанс):        ⟨τ_tick⟩ ≈ 2.2/ω
    λ >> ω (Record-limited):  ⟨τ_tick⟩ → τ_min ≈ 1.84/ω

Record speed limit: при любом λ, ⟨τ_tick⟩ ≥ τ_min (см. 4.7).

Anchor: T24_SV_commit_rate_record_speed_limit.py


5.6. Согласованность часов
--------------------------
Разные часы (разные Instruments) согласованы, если их Bulk-гамильтонианы
определяются одними физическими константами (ℏ, m_e, α, ...).

Универсальность Bulk-физики → согласованность часов.

Физически: цезиевые часы в Москве и Токио тикают с одинаковой частотой
(при одинаковом T(x)), потому что α и m_e одинаковы везде.


5.7. Интерфейс к Gravity layer
------------------------------
Gravity layer вводит поле T(x) ∈ (0,1], модифицирующее hazard:

    λ_local(x) = T(x) · λ_I.

Следствие: часы в разных точках тикают с разной скоростью.
FactLog растёт неоднородно по пространству.

Конкретизация T(x) — в Gravity layer (интерфейс I1).

================================================================================
6. ТЕНЗОРНАЯ СТРУКТУРА, КОРРЕЛЯЦИОННАЯ БЛИЗОСТЬ, МУЛЬТИПЛИКАТИВНОСТЬ
================================================================================

6.1. Независимые системы
------------------------
Для независимых подсистем A и B:

    H_AB = H_A ⊗ H_B,    |ψ_AB⟩ = |ψ_A⟩ ⊗ |ψ_B⟩.

6.2. Мультипликативность амплитуд
---------------------------------
Для независимых историй:

    S[H_A ∧ H_B] = S[H_A] + S[H_B],

откуда:

    A(H_A ∧ H_B) = A(H_A) · A(H_B).

Anchor: T19_SV_multiplicativity.py

6.3. Две структуры близости
---------------------------
CCM различает две независимые метрики:

(1) d_medium — причинная метрика (пространство среды)
    Определяет: распространение сигналов, световой конус, no-signalling.
    Связана с T(x) через слой Gravity.
    "Далеко" в d_medium = большая задержка передачи.

(2) d_matter — корреляционная метрика (пространство материи)
    Определяет: степень запутанности, "близость" в смысле общей истории.
    Для двух подсистем с состоянием ρ:
    
        d_matter(ρ) ~ 1/C(ρ),
    
    где C — корреляционный монотон (например, concurrence).
    "Далеко" в d_matter = слабая корреляция.

Ключевое свойство: d_medium и d_matter независимы.

Пример: синглет после разлёта на световой год.
- d_medium: огромное (сигнал идёт год)
- d_matter: минимальное (C = 1, максимальная корреляция)

Следствие: "нелокальность" запутанности — не парадокс.
Корреляции не требуют сигнала, потому что близость в d_matter
не требует близости в d_medium. Это разные структуры.

Anchor: T23_two_spaces.py

================================================================================
6A. BELL-КОРРЕЛЯЦИИ, NO-SIGNALLING, НЕЛОКАЛЬНОСТЬ
================================================================================

6A.1. Корреляции в entangled состояниях
---------------------------------------
Для Bulk-состояния ρ_AB и локальных Instruments:

    P(a,b|x,y) = Tr[(E^A_a(x) ⊗ E^B_b(y)) ρ_AB].

Это Born weights для совместного outcome при spacelike Commits.

Пример (singlet, спиновые измерения):

    E(θ_A, θ_B) = -cos(θ_A - θ_B).

6A.2. Нарушение неравенства Белла
---------------------------------
CHSH-величина:

    S = E(a₁,b₁) + E(a₁,b₂) + E(a₂,b₁) − E(a₂,b₂).

Пределы:
- Локальные hidden variables: |S| ≤ 2
- Квантовая механика (singlet): |S| = 2√2
- Tsirelson bound: |S| ≤ 2√2 (следствие гильбертовой структуры)

6A.3. No-signalling
-------------------
ТЕОРЕМА (частный случай T5).
Маргинальное распределение Alice не зависит от выбора Bob:

    P(a|x) = Σ_b P(a,b|x,y) = Tr[E^A_a(x) ρ_A],

где ρ_A = Tr_B[ρ_AB] — редуцированная матрица.

Доказательство: линейность partial trace, независимость от операций на B.

Следствие: корреляции видны только при сравнении результатов
(требует классического канала, ограниченного скоростью света).

6A.4. CCM-интерпретация
-----------------------
"Нелокальность" корреляций не противоречит причинности.

Объяснение через d_medium и d_matter (секция 6.3):

(1) d_medium (причинная метрика): Alice и Bob spacelike-разделены.
    Сигнал между ними требует времени. No-signalling выполнен.

(2) d_matter (корреляционная метрика): singlet имеет d_matter ≈ 0
    (максимальная корреляция, entanglement).

Корреляции — свойство Bulk-состояния. Не требуют передачи.
"Близость" в d_matter ≠ близость в d_medium.

6A.5. Порядок spacelike Commits
-------------------------------
DI-инвариантность (D4): если Commit_A и Commit_B spacelike, то

    P(a,b|x,y; A first) = P(a,b|x,y; B first).

FactLog-индекс n для spacelike событий — описательный, не физический.

Anchor: T29_SV_bell_chsh.py, T32_SV_ghz.py

================================================================================
6B. КОНТЕКСТУАЛЬНОСТЬ
================================================================================

6B.1. Контекст и Instrument
---------------------------
Outcome зависит не только от измеряемого observable A, но и от полного
Instrument (какие другие observables измеряются совместно).

Формально: если A коммутирует с B и с C, но B и C не коммутируют,
то измерение A в контексте {A,B} может давать статистику, отличную
от измерения A в контексте {A,C}.

6B.2. Теорема Кохена-Шпекера
----------------------------
Не существует функции v: Observables → {±1}, такой что:
(a) v(A) ∈ спектр(A) для всех A
(b) v совместима с функциональными соотношениями между коммутирующими observables

Следствие: outcomes не являются "скрытыми свойствами" системы.

6B.3. Peres-Mermin square
-------------------------
Пример: 9 observables в сетке 3×3, где:
- Каждая строка/столбец — коммутирующий набор
- Произведение по каждой строке = +I
- Произведение по столбцам: +I, +I, −I

Нет присваивания ±1, удовлетворяющего всем constraints.

6B.4. CCM-интерпретация
-----------------------
Контекстуальность — следствие онтологии CCM:

(1) Outcome не существует до Commit
(2) Commit определён относительно Instrument
(3) Разные Instruments (разные контексты) → разные Facts

"Значение observable" не является свойством Bulk-состояния.
Это свойство пары (состояние, Instrument).

Anchor: T34_SV_contextuality.py

================================================================================
7. CPTP, ENVIRONMENT, NO-SIGNALLING
================================================================================

7.1. CPTP как структурное ограничение
-------------------------------------
Минимальный согласованный класс операций над density matrices — CPTP.

7.2. No-signalling
------------------
Для ρ_AB и локальной CPTP Φ_A без postselection:

    Tr_A((Φ_A ⊗ I)(ρ_AB)) = Tr_A(ρ_AB) = ρ_B.

Локальные действия не меняют маргинальную статистику удалённой подсистемы.

Anchor: T21_SV_no_signalling_tensor.py

7.3. Environment как CPTP-редукция
----------------------------------
Bulk унитарен. Неунитарность — эффективное описание подсистемы S при
взаимодействии с Environment E:

    ρ_S → Φ(ρ_S) := Tr_E[U_SE (ρ_S ⊗ ρ_E) U_SE†].

По Stinespring любой CPTP имеет такое представление.

7.4. Сегментация и марковский случай
------------------------------------
DI-knife: физика не может зависеть от числа вычислительных подшагов N.

Если выбран Markovian environment-layer, сегментационная инвариантность
обеспечивается полугруппой:

    Φ_Δτ = exp(Δτ · L),

где L — Lindblad generator. Тогда Φ_Δτ = (Φ_{Δτ/N})^N для любого N.

Не-марковские модели требуют отдельного анализа DI-совместимости.

================================================================================
7A. ГРАНИЦА SYSTEM/ENVIRONMENT: ОПЕРАЦИОНАЛЬНЫЙ КРИТЕРИЙ
================================================================================

7A.1. Проблема разреза
----------------------
Commit определён относительно пары (System, Environment).
Где проходит граница?

Исторически это "проблема Гейзенберговского разреза" (Heisenberg cut).
CCM даёт операциональный ответ.

7A.2. Критерий границы
----------------------
ОПРЕДЕЛЕНИЕ (Граница S/E):

Подсистема E является Environment для S тогда и только тогда, когда:

(a) Взаимодействие S-E создаёт корреляции (record)
(b) Эти корреляции необратимы в следующем смысле:

    W_erase ≥ kT · I(S:E)

где W_erase — минимальная работа для стирания корреляций,
I(S:E) — взаимная информация (в битах, при логарифме по основанию 2).

Эквивалентная формулировка:
Восстановление когерентности S требует контроля над всеми степенями
свободы E, в которые распространилась информация.

7A.3. Следствия
---------------
(1) Граница — не произвольный выбор, а физический факт о setup'е.

(2) Граница может быть разной в разных экспериментах:
    - Атом в идеальной ловушке: E = вакуумные моды + стенки
    - Атом на столе: E = воздух + свет + ...
    
(3) Улучшение изоляции сдвигает границу:
    - Больше S, меньше E
    - Commit происходит позже (или не происходит)
    
(4) В пределе идеальной изоляции: E = ∅, Commit невозможен,
    система эволюционирует унитарно неограниченно.

7A.4. Commit как пересечение границы
------------------------------------
Commit происходит когда:

(a) Физический процесс создаёт record в E
(b) Record удовлетворяет критерию различимости (секция 4.7):
    F(τ) ≤ δ для τ ≥ τ_min
(c) Информация распространилась за границу изоляции

После Commit:
- Outcome зафиксирован как Fact
- Когерентность между альтернативами потеряна (для S)
- Информация сохраняется в E (но недоступна для интерференции)

7A.5. Объективность границы
---------------------------
Граница S/E — объективный физический факт, зависящий от:
- Геометрии setup'а
- Качества изоляции
- Температуры (термальный Environment)

Не зависит от:
- Знания экспериментатора
- "Сознания"
- Выбора математического описания

Два экспериментатора, анализирующих один setup, придут к одной границе
(в пределах точности описания физики).

7A.6. Иерархия границ и Wigner's Friend
---------------------------------------
В сложных экспериментах возможна иерархия:

    S₁ ⊂ S₂ ⊂ S₃ ...

где S₁ — "исходная" система, S₂ — система + аппарат, и т.д.

Commit на уровне k означает:
- Record создан в E_k (дополнении S_k)
- Для наблюдателя, контролирующего S_{k+1}, этот Commit — ещё не Fact

Это снимает парадокс Wigner's Friend: Friend и Wigner имеют разные
границы S/E, поэтому разные FactLog'и. Противоречия нет.

Подробнее: секция 9.6.

================================================================================
8. DI-KNIFE: ЗАПРЕЩЁННЫЕ КОНСТРУКЦИИ
================================================================================

8.1. Запрещено: micro-sum вдоль пути
------------------------------------
Объявить Fact величину X = Σ_{i=1..N} X_i, где N — параметр сегментации.
Симптом: std(X) ~ 1/√N при фиксированном mean.

Anchor: T12_SV_DI_segmentation_knife.py

8.2. Разрешено: глобальный stopping-time
----------------------------------------
Fact — результат глобальной конкуренции (кто commit-ит первым),
а не сумма локальных вкладов.


================================================================================
9. OUTCOMES: RECORD → INSTRUMENT → POVM
================================================================================

9.1. Outcomes из физики записи
------------------------------
Outcome v ∈ Ω — класс эквивалентности record-микросостояний: v := [r].
Ω привязано к структуре записи, не к произвольному соглашению.

Связь с альтернативами V: outcome v соответствует подпространству H_v ⊂ H,
образованному всеми fine-grained альтернативами, дающими одну и ту же запись.

9.2. Instrument
---------------
I = {M_v}_{v∈Ω}, где M_v — CP map, Σ_v M_v — CPTP.

Kraus-форма: M_v(ρ) = Σ_α K_{v,α} ρ K_{v,α}†.
Полнота: Σ_v Σ_α K_{v,α}† K_{v,α} = I.
Вероятность: P(v|ρ) = Tr(M_v(ρ)).

9.3. POVM как производный объект
--------------------------------
E_v := Σ_α K_{v,α}† K_{v,α}.

Тогда E_v ≥ 0, Σ_v E_v = I, и P(v|ρ) = Tr(E_v ρ).

9.4. DI-refinement в POVM-языке
-------------------------------
Coarse-graining: E_v = Σ_j E_{v_j} ⟺ M_v = Σ_j M_{v_j}.
Тогда P(v) = Σ_j P(v_j).

================================================================================
9.5. WHICH-PATH, DELAYED CHOICE, QUANTUM ERASER
================================================================================

9.5.1. Which-path как физика записи
-----------------------------------
Интерференция исчезает, когда информация о пути становится доступной как record
(включая случаи, когда эта информация записана в коррелированную подсистему).

В терминах Core: outcome-структура определяется record → Instrument.
Если Instrument/Environment различает альтернативы, их классы outcomes разделяются,
и когерентные слагаемые не складываются в наблюдаемой статистике singles.

9.5.2. Quantum eraser
---------------------
"Стирание" which-path не является ретрокаузальностью.

Интерференция восстанавливается в условной статистике (coincidence),
то есть при рассмотрении распределения P(screen | marker outcome),
что является postselection/conditioning.

Singles-статистика на экране соответствует суммированию по маргиналу
и не демонстрирует интерференции.

9.5.3. Delayed choice
---------------------
Выбор "открытого/закрытого" интерферометра является выбором Instrument до Commit.
Пока Commit не произошёл, Bulk эволюционирует унитарно; Facts о "пути" не существует.

Anchors: T30_SV_delayed_choice.py, T33_SV_quantum_eraser.py

================================================================================
9.6. WIGNER'S FRIEND
================================================================================

9.6.1. Setup
------------
Friend (F) измеряет спин частицы в изолированной лаборатории.
Wigner (W) снаружи, контролирует лабораторию как квантовую систему.

Состояние частицы: |ψ⟩ = (|↑⟩ + |↓⟩)/√2.

9.6.2. Два уровня описания
--------------------------
Граница F (Friend как наблюдатель):
- S_F = частица
- E_F = аппарат + мозг Friend + ...
- После измерения: Commit произошёл, Fact в FactLog_F

Граница W (Wigner снаружи):
- S_W = частица + аппарат + Friend (вся лаборатория)
- E_W = внешний мир
- Лаборатория изолирована → Commit НЕ произошёл для W
- Состояние S_W: |Ψ⟩ = (|↑⟩|F_↑⟩ + |↓⟩|F_↓⟩)/√2

9.6.3. Разрешение в CCM
-----------------------
Нет противоречия:

- FactLog_F содержит Fact "результат ↑" (или ↓)
- FactLog_W не содержит этого Fact (лаборатория в суперпозиции)

Разные границы S/E → разные FactLog'и.

Ключ: FactLog определён относительно границы, не абсолютно.

9.6.4. Что происходит при открытии лаборатории
----------------------------------------------
Wigner открывает лабораторию (нарушает изоляцию):
- Информация из S_W утекает в E_W
- Commit происходит для W
- FactLog_W получает Fact, согласованный с FactLog_F

Согласованность гарантирована:
- Декогеренция в pointer basis определяет допустимые outcomes
- W увидит то же, что F уже зафиксировал

9.6.5. Frauchiger–Renner
------------------------
Парадокс FR добавляет двух наблюдателей и логический вывод.

CCM-ответ: логический вывод через границы S/E некорректен.

Утверждение "F знает что спин ↑" — Fact в FactLog_F.
Утверждение "W знает состояние лаборатории" — относится к S_W.

Нельзя комбинировать Facts из разных FactLog'ов в один силлогизм.
Каждый FactLog когерентен внутри себя.

9.6.6. Статус
-------------
Wigner's Friend — не парадокс, а иллюстрация:
- FactLog относителен к границе S/E
- Согласование происходит при пересечении границ
- "Объективная реальность" = FactLog при фиксированной границе

Anchor: T31_SV_wigner_friend.py

================================================================================
10. ИНТЕРФЕЙСЫ К СЛОЯМ
================================================================================

Ядро определяет структуру. Слои конкретизируют физику.

10.1. Интерфейс к Gravity
-------------------------
Ядро: λ_local(x) = T(x) · ω_record, где T(x) ∈ (0,1].
Слой Gravity: задаёт T(x) через гравитационный потенциал, метрику, массу.
Следствия: замедление часов, красное смещение, Shapiro delay.

10.2. Интерфейс к EM
--------------------
Ядро: U(1)-связность a(u→v), holonomy Φ_C как единственный DI-инвариант.
Слой EM: связь a(e) с векторным потенциалом A_μ, динамика поля, заряды.

10.3. Интерфейс к Environment
-----------------------------
Ядро: CPTP как редукция, Stinespring-представление.
Слой Environment: конкретные каналы (dephasing, amplitude damping),
параметры γ, зависимость от T(x), марковость/не-марковость.

10.4. Интерфейс к Matter-Space
------------------------------
Ядро: d_matter как корреляционная метрика, независимая от d_medium.
Слой Matter-Space: конкретный выбор монотона (concurrence, negativity),
связь с декогеренцией, динамика d_matter.


================================================================================
11. СТАТУС
================================================================================

11.1. Постулаты ядра
--------------------
P1. Bulk — комплексное сепарабельное гильбертово пространство.
    Ортогональность — примитив структуры.

P2. Замкнутый Bulk: эволюция унитарна по параметру τ,
    меры историй нормируемы.

P3. Commit law:
    (a) Survival: S_I(Δτ) = exp(-λ_I · Δτ), где λ_I ~ ω_record(I).
    (b) Born selection: P(v|ρ,Commit) = Tr(E_v ρ).

P4. DI (Description Invariance):
    Статистика Fact инвариантна к описательным преобразованиям.
    Описательный refinement — когда записи подклассов неразличимы.

P5. Необратимость Commit:
    Commit увеличивает энтропию Environment.
    Порядок n согласован с порядком S_vN(E).


11.2. Теоремы ядра (выводятся из постулатов)
--------------------------------------------
T1. Фаза амплитуды: φ(H) = S[H]/ℏ + const.
    (Из: аддитивность действия + непрерывность + композиция историй)

T2. Born exponent p = 2.
    (Из: DI-refinement + ортогональность в гильбертовом пространстве)

T3. Экспоненциальный survival.
    (Из: DI-segmentation + непрерывность + нормировка)

T4. τ-инвариантность наблюдаемых.
    (Из: структура предсказаний — все через отношения)

T5. No-signalling.
    (Из: тензорная структура + линейность CPTP)


11.3. Определения ядра
----------------------
D1. Реальность = FactLog.
    
    Уточнение: Commit определён относительно границы System/Environment.
    "Граница" — физическая (декогеренция), не конвенциональная.
    
    В практическом пределе (неидеальная изоляция): единый Environment,
    единый FactLog.
    
    В теоретическом пределе (идеальная изоляция): Commit произошёл
    тогда и только тогда, когда record необратимо распространился
    за границу изоляции.

D2. Физическое время = статистика tick-записей в FactLog.

D3. Outcome = класс эквивалентности записей = подпространство H.

D4. Описательный refinement: записи подклассов неразличимы для Environment.

D5. τ_min = inf{τ : F(τ) ≤ 1/e} — минимальное время записи.

D6. d_medium, d_matter — независимые метрики близости.


11.4. Интерфейсы (не постулаты CCM)
-----------------------------------
I1. T(x) = sqrt(1 + 2Φ/c²) — correspondence с GR в weak field.
    Это требование согласованности с экспериментом, не вывод.

I2. Конкретные CPTP-каналы (Lindblad) — из физики Environment.

I3. Выбор корреляционного монотона для d_matter.


11.5. Открытые вопросы
----------------------
[?] Почему U(1)? Минимальность абелевой группы — интуиция, не доказательство.

[?] Динамика T(x): уравнения движения lapse. Делегировано слою Gravity.

11.6. Anchors
-------------
    T01B_DI_refinement_p_sweep.py          — Born p=2 из DI
    T09_aharonov_bohm.py                   — holonomy
    T12_SV_DI_segmentation_knife.py        — DI-knife
    T19_SV_multiplicativity.py             — тензорная структура
    T21_SV_no_signalling_tensor.py         — no-signalling
    T24_SV_commit_rate_record_speed_limit.py — record speed limit
    T25_SV_DI_survival_exponential.py      — exponential survival из DI
    T29_SV_bell_chsh.py — Bell/CHSH + no-signalling marginals
    T30_SV_delayed_choice.py — delayed choice
    T31_SV_wigner_friend.py — Wigner/Frauchiger–Renner gate через decoherence
    T32_SV_ghz.py — GHZ
    T33_SV_quantum_eraser.py — quantum eraser
    T34_SV_contextuality.py — Peres–Mermin contextuality
    T35_SV_record_speed_limit_detector_dependence.py — CCM-specific: τ_min от детектора
    Z01_SV_quantum_zeno_ccm.py             — Zeno limited by record speed

================================================================================
12. CCM-СПЕЦИФИЧНЫЕ ПРЕДСКАЗАНИЯ
================================================================================

12.1. Что выводится vs постулируется
------------------------------------
CCM выводит из DI ряд утверждений, которые в стандартной QM постулируются:

| Утверждение              | Стандартная QM      | CCM                 |
|--------------------------|---------------------|---------------------|
| Born rule (p = 2)        | Постулат            | Теорема T2 из DI    |
| Exponential survival     | Model-dependent     | Теорема T3 из DI    |
| Record speed limit       | Undefined           | τ_min = 1.84ℏ/ΔE_rec|

Первые два — структурные результаты (дают те же числа, но с выводом).
Третий — потенциально testable prediction.


12.2. Record speed limit: testable prediction
---------------------------------------------
CCM (секция 4.7):

    τ_min = 1.84 ℏ / ΔE_record

Минимальное время Commit определяется record-системой (детектором),
не измеряемой системой.

Стандартные quantum speed limits (Mandelstam-Tamm, Margolus-Levitin):

    Δt ≥ πℏ / (2 ΔE_system)

привязаны к измеряемой системе.

КЛЮЧЕВОЕ РАЗЛИЧИЕ:
- Фиксируем систему, меняем детектор → CCM: τ_min меняется
- Фиксируем детектор, меняем систему → CCM: τ_min не меняется

Пример (NV-центр в алмазе, ΔE_system ≈ 12 μeV):
- Микроволновый детектор (3 GHz):  τ_min ≈ 98 ps
- Оптический детектор (470 THz):   τ_min ≈ 0.6 fs
- Отношение: 1.6 × 10⁵

CCM предсказывает: отношение τ_min равно отношению частот детекторов,
независимо от свойств NV-центра.


12.3. Experimental signature
----------------------------
Протокол:
1. Фиксировать квантовую систему (спин, атом, ...)
2. Измерять с детекторами разного ΔE_record
3. Определять минимальное время появления outcome

CCM signature:
    τ_min(detector A) / τ_min(detector B) = ΔE_B / ΔE_A

Это отношение определяется ТОЛЬКО детекторами.

Статус: предложение эксперимента. Прямая проверка требует
разрешения по времени ~ fs-as, что на пределе современной техники.


12.4. Численные предсказания
----------------------------
Bell correlations, no-signalling, interference patterns —
CCM даёт те же числа, что стандартная QM.

Отличие: CCM ВЫВОДИТ эти результаты из меньшего числа постулатов
(DI + структура Bulk), а не постулирует напрямую.

Anchor: T35_SV_record_speed_limit_detector_dependence.py

================================================================================
12.5. Quantum Zeno: конкретизация record speed limit
================================================================================

12.5.1. Соотношение CCM и стандартной QM
----------------------------------------
Стандартная QM:
- Идеализация: проективные измерения, λ → ∞ возможно
- Zeno полный в этом пределе (квадратичный старт: p(τ) ≈ 1 - (ΔH)²τ²/ℏ²)
- "Реальные ограничения — технические детали"

CCM:
- Конкретизирует предел: λ ≤ ω_record = 1.84 ℏ / ΔE_record
- Это ФУНДАМЕНТАЛЬНЫЙ предел, определяемый детектором
- Zeno ограничен когда ω_record ~ Ω (частота системы)

CCM НЕ ПРОТИВОРЕЧИТ QM. CCM делает количественным то, что QM
оставляет как "идеализацию".

12.5.2. Количественное предсказание
-----------------------------------
Система с Rabi-частотой Ω, Poisson Commit rate λ.

Survival при одном Commit:

    P_one = (2λ² + Ω²) / (2(λ² + Ω²))

При λ >> Ω: P_one ≈ 1 - Ω²/(2λ²) — согласуется с квадратичным QM.

Эффективный decay rate:

    λ_eff = λ · |ln(P_one)| ≈ Ω²/(2λ)  при λ >> Ω

Ключевое ограничение CCM:

    λ ≤ ω_record  →  λ_eff ≥ Ω²/(2·ω_record)

12.5.3. Testable scenario
-------------------------
Система: Ω = 10 GHz

Детектор A (быстрый): ω_record = 100 GHz
  → λ_max/Ω = 10, P_one ≈ 0.995, Zeno почти полный

Детектор B (медленный): ω_record = 10 GHz  
  → λ_max/Ω = 1, P_one = 0.75, Zeno неполный

CCM PREDICTION:
Степень Zeno определяется ДЕТЕКТОРОМ, не системой.
Один и тот же осциллятор: разные детекторы → разная "заморозка".

Anchor: Z01_SV_quantum_zeno_ccm.py

================================================================================
END CORE v4.7.0
================================================================================