================================================================================
COMMIT-CENTRIC MODEL (CCM): EM LAYER
Электромагнетизм как U(1)-связность в Bulk
================================================================================
Версия: v1.1 (EM layer, RU)
Дата: Декабрь 2025
Подключается к: CCM Core v4.8.x
================================================================================


АННОТАЦИЯ
---------
EM Layer конкретизирует U(1)-связность Core (секция 2.2) как электромагнитное
взаимодействие. Слой задаёт:

- Связь phase increment a(e) с векторным потенциалом A_μ
- Заряд q как coupling constant
- Электрическое и магнитное поля как производные A_μ
- Калибровочную инвариантность как следствие DI
- Силу Лоренца как градиент фазы
- Интерференцию заряженных частиц (AB-эффект как прототип)

Anchors:
- T09_SV_aharonov_bohm.py
- E01_SV_lorentz_force.py
- E02_SV_gauge_invariance.py


ОГЛАВЛЕНИЕ
----------
0. Интерфейс к Core
1. От a(e) к A_μ
2. Заряд и coupling
3. Электрическое и магнитное поля
4. Калибровочная инвариантность
5. Сила Лоренца из фазы
6. Динамика поля: уравнения Максвелла
7. Фотон как квант поля
8. Anchors
9. Открытые вопросы


================================================================================
0. ИНТЕРФЕЙС К CORE
================================================================================

Core v4.8.0 задаёт (секция 2.2, 2.5):

(1) U(1)-связность: phase increment a(u→v) на рёбрах
(2) Gauge transformation: a'(u→v) = a(u→v) + θ(u) − θ(v)
(3) DI-инвариант: только holonomy Φ_C = Σ_{e∈C} a(e) наблюдаема
(4) Амплитуда пути: A(H) = exp(i[S[H]/ℏ + Σ_e a(e)])

EM Layer отождествляет эту структуру с электромагнетизмом.


================================================================================
1. ОТ a(e) К A_μ
================================================================================

1.1. Континуальный предел
-------------------------
Для ребра e от точки x к точке x + dx:

    a(e) = (q/ℏ) A_μ(x) dx^μ

где:
- q — заряд частицы
- A_μ = (φ/c, A) — 4-потенциал
- φ — скалярный потенциал
- A — векторный потенциал

1.2. Полная фаза вдоль пути
---------------------------
Для пути γ от точки 1 к точке 2:

    Φ[γ] = (q/ℏ) ∫_γ A_μ dx^μ = (q/ℏ) ∫_γ (φ dt - A·dr)

1.3. Holonomy как магнитный поток
---------------------------------
Для замкнутого контура C:

    Φ_C = (q/ℏ) ∮_C A·dl = (q/ℏ) ∫∫_S B·dS = (q/ℏ) Φ_B

где Φ_B — магнитный поток через поверхность S.

Это AB-эффект: holonomy = (q/ℏ) × магнитный поток.

Anchor: T09_SV_aharonov_bohm.py


================================================================================
2. ЗАРЯД И COUPLING
================================================================================

2.1. Заряд как coupling constant
--------------------------------
Заряд q определяет силу связи частицы с полем A_μ:

    a(e) ∝ q

Следствия:
- q = 0: частица не чувствует A_μ (нейтральная)
- q > 0 vs q < 0: противоположные фазовые вклады
- |q| определяет величину эффекта (масштаб фазы holonomy)

2.2. Элементарный заряд и калибровка
------------------------------------
В SI элементарный заряд e фиксирован как константа системы единиц
(в современной SI-редакции). [BIPM SI Brochure, 9th ed.]

CCM/EM layer не выводит квантование заряда из первых принципов:
наблюдаемый факт “заряды приходят пакетами” остаётся эмпирическим input
(аналогично тому, что конкретные численные значения констант задаются природой).

2.3. Сохранение заряда
----------------------
Локальная U(1) gauge-инвариантность в стандартной формулировке влечёт
уравнение непрерывности:

    ∂_μ j^μ = 0.

В CCM-интерпретации это означает: описательная (gauge) свобода не может
менять статистику Facts; ток, связанный с симметрией, сохраняется.

2.4. ε₀ и μ₀: “фундаментальные” или “единицы”?
----------------------------------------------
Вопрос о “происхождении ε₀ и μ₀” — это в основном вопрос о выборе единиц.

Факт:
- В разных системах единиц (SI vs Gaussian/CGS vs натуральные ℏ=c=1)
  явный вид уравнений и наличие ε₀, μ₀ меняются.
- Наблюдаемая физика кодируется безразмерными комбинациями, прежде всего
  постоянной тонкой структуры:

    α = e² / (4π ε₀ ℏ c).   [CODATA/NIST]

Связь:

    ε₀ μ₀ = 1/c²

— это следствие конвенций электромагнитных единиц и определения c, а не
самостоятельный “закон природы”.

Итого:
- ε₀ и μ₀ — удобные параметры записи уравнений в SI;
- физически инвариантная “сила электромагнетизма” задаётся α (и выбранной
  gauge-структурой U(1)).


================================================================================
3. ЭЛЕКТРИЧЕСКОЕ И МАГНИТНОЕ ПОЛЯ
================================================================================

3.1. Определения через A_μ
--------------------------
    E = -∇φ - ∂A/∂t
    B = ∇ × A

Ковариантная форма:

    F_μν = ∂_μ A_ν - ∂_ν A_μ

3.2. Компоненты F_μν
--------------------
    F_0i = E_i / c
    F_ij = -ε_ijk B_k

3.3. Поля как наблюдаемые
-------------------------
E и B — gauge-инвариантны. Это DI-инварианты.

A_μ — gauge-зависим, не наблюдаем напрямую.
Наблюдаема только holonomy.

Anchor: E02_SV_gauge_invariance.py


================================================================================
4. КАЛИБРОВОЧНАЯ ИНВАРИАНТНОСТЬ
================================================================================

4.1. Gauge transformation
-------------------------
    A_μ → A'_μ = A_μ + ∂_μ χ

Эквивалентно в Core:

    a(e) → a'(e) = a(e) + θ(u) - θ(v)

где θ(x) = (q/ℏ) χ(x).

4.2. Инвариантность F_μν
------------------------
    F'_μν = F_μν

(частные производные коммутируют)

4.3. DI-интерпретация
---------------------
Gauge transformation — описательное преобразование (D5 в Core).
Физика не зависит от выбора gauge.

Anchor: E02_SV_gauge_invariance.py


================================================================================
5. СИЛА ЛОРЕНЦА ИЗ ФАЗЫ
================================================================================

5.1. Фаза как действие
----------------------
Полная фаза частицы с зарядом q в поле A_μ:

    Φ_total = S_free/ℏ + (q/ℏ) ∫ A_μ dx^μ

5.2. Уравнения движения
-----------------------
Вариация действия δS = 0 даёт:

    m dv/dt = q(E + v × B)

Это сила Лоренца.

5.3. Следствия
--------------
- Магнитное поле → круговое движение (циклотрон)
- Электрическое поле → линейное ускорение
- Скрещенные E×B → дрейфовая скорость v_drift = E/B

Anchor: E01_SV_lorentz_force.py


================================================================================
6. ДИНАМИКА ПОЛЯ: УРАВНЕНИЯ МАКСВЕЛЛА
================================================================================

6.1. Структурные уравнения (тождества Бьянки)
---------------------------------------------
Из определения F_μν:

    ∇·B = 0
    ∇×E + ∂B/∂t = 0

Это геометрические тождества.

6.2. Динамические уравнения
---------------------------
Связь поля с источниками (постулат EM layer):

    ∂_μ F^μν = μ_0 j^ν

В 3D-форме:

    ∇·E = ρ/ε_0
    ∇×B - (1/c²)∂E/∂t = μ_0 j

6.3. Статус в CCM
-----------------
Структурные уравнения — следствие определения F через A.
Динамические уравнения — ПОСТУЛАТ EM layer.


================================================================================
7. ФОТОН КАК КВАНТ ПОЛЯ
================================================================================

7.1. Квантование EM поля
------------------------
Свободное поле A в калибровке ∇·A = 0 разлагается в моды:

    A(x,t) = Σ_{k,λ} √(ℏ/2ε₀ωV) [a_{kλ} ε_{kλ} e^{i(k·x - ωt)} + h.c.]

где:
- k — волновой вектор
- ω = c|k| — частота
- λ = 1,2 — поляризации
- ε_{kλ} — векторы поляризации
- a_{kλ}, a†_{kλ} — операторы уничтожения/рождения
- V — нормировочный объём

Коммутационные соотношения:

    [a_{kλ}, a†_{k'λ'}] = δ_{kk'} δ_{λλ'}

7.2. Fock space как Bulk
------------------------
EM сектор Bulk — Fock space:

    H_EM = ⊕_{n=0}^∞ H_n

где H_n — пространство n-фотонных состояний.

Базисные состояния:

    |n_{k₁λ₁}, n_{k₂λ₂}, ...⟩

Вакуум: |0⟩ — состояние без фотонов.

Однофотонное состояние:

    |1_{kλ}⟩ = a†_{kλ}|0⟩

7.3. Фотон в CCM: Bulk и Commit
-------------------------------
В Bulk: фотон — возбуждение поля, описывается амплитудой.

Суперпозиция путей:

    |ψ⟩ = α|path_1⟩ + β|path_2⟩

Амплитуды интерферируют (Bulk-уровень).

При Commit (детекция): один outcome фиксируется.

    P(detector_1) = |α|²
    P(detector_2) = |β|²

7.4. Photodetection как Instrument
----------------------------------
Детектор фотонов — Instrument с outcomes {click, no_click}.

Модель (идеальный детектор моды k):

    M_click(ρ) = a_k ρ a†_k
    M_no_click(ρ) = (I - a†_k a_k / n_max) ρ (I - a†_k a_k / n_max)

Для когерентного состояния |α⟩:

    P(click) = 1 - e^{-|α|²}

Для Fock state |n⟩:

    P(click) ∝ n

7.5. Интерференция одиночных фотонов
------------------------------------
Mach-Zehnder интерферометр:

Вход: |1⟩ (один фотон)

После первого beam-splitter:

    |ψ⟩ = (|upper⟩ + i|lower⟩) / √2

Фазовый сдвиг φ в верхнем плече:

    |ψ⟩ = (e^{iφ}|upper⟩ + i|lower⟩) / √2

После второго beam-splitter:

    |ψ⟩ = [(e^{iφ} + 1)|D1⟩ + i(e^{iφ} - 1)|D2⟩] / 2

Вероятности детекции:

    P(D1) = |e^{iφ} + 1|² / 4 = cos²(φ/2)
    P(D2) = |e^{iφ} - 1|² / 4 = sin²(φ/2)

При φ = 0: P(D1) = 1, P(D2) = 0 (конструктивная/деструктивная).
При φ = π: P(D1) = 0, P(D2) = 1.

7.6. Вакуумные флуктуации
-------------------------
Вакуум |0⟩ имеет ненулевую энергию:

    ⟨0|H_EM|0⟩ = Σ_k ℏω_k / 2

Физические следствия:
- Спонтанное излучение (связь с Environment Layer)
- Казимир эффект
- Лэмбовский сдвиг

7.7. Связь с Environment Layer
------------------------------
EM вакуум — специфический тип Environment.

Amplitude damping (спонтанное излучение):
- Атом |e⟩ → |g⟩ + фотон
- Rate Γ определяется матричным элементом и плотностью мод

Kraus operators (из секции 3.2 Environment Layer):

    K_0 = |g⟩⟨g| + √(1-γ)|e⟩⟨e|
    K_1 = √γ |g⟩⟨e|

где γ = 1 - e^{-Γt}.


================================================================================
8. ANCHORS
================================================================================

8.1. T09_SV_aharonov_bohm.py
----------------------------
Holonomy, AB-эффект, интерференция заряженных частиц.

Результат: PASS
- Замкнутый контур: holonomy = Φ
- Два пути: |Δφ| = Φ  
- Интерференция: |ψ|² = 2 + 2cos(Φ)

8.2. E01_SV_lorentz_force.py
----------------------------
Сила Лоренца из фазовой структуры.

Результат: PASS
- B field → cyclotron radius r = mv/(qB)
- E field → acceleration a = qE/m
- E×B → drift v = E/B

8.3. E02_SV_gauge_invariance.py
-------------------------------
Gauge инвариантность полей.

Результат: PASS
- A_μ меняется под gauge
- B = ∇×A инвариантен
- ∮A·dl (closed) инвариантен
- ∫A·dl (open) меняется

8.4. E03_SV_photon_interference.py
----------------------------------
Интерференция одиночных фотонов.

Результат: [ожидает запуска]
- Mach-Zehnder: P(D1) = cos²(φ/2)
- Hong-Ou-Mandel: bunching
- Classical negative control
- Visibility V = 1


================================================================================
9. ОТКРЫТЫЕ ВОПРОСЫ
================================================================================

[?] Квантование заряда: почему q = n·e?
    EM layer фиксирует U(1)-связность и coupling q, но не объясняет,
    почему спектр q дискретен. Возможные направления: топология (Дирак),
    compact U(1), объединение gauge-групп.

[?] Связь EM и Gravity: как EM stress-energy становится источником T(x)?
    В GR: T_μν(EM) → G_μν → метрика. В CCM: нужен отдельный "Sources Layer",
    который связывает распределения энергии/импульса с lapse T(x).

[?] QED corrections в CCM-формализме.
    Петлевые поправки (g−2, Lamb shift) требуют квантовой теории поля на языке CCM
    (Fock space + renormalization + Instruments детекции).


================================================================================
END EM LAYER v1.0
================================================================================