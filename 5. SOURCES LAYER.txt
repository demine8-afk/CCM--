================================================================================
COMMIT-CENTRIC MODEL (CCM): SOURCES LAYER
Источники lapse T(x) в weak-field: масса + энергия полей
================================================================================
Версия: v0.1 (Sources layer, RU)
Дата: Декабрь 2025
Подключается к: CCM Core v4.8.x, Gravity layer v1.3, EM layer v1.1
================================================================================


АННОТАЦИЯ
---------
Sources layer вводит weak-field правило, связывающее источники (масса и энергия)
с ньютоновским потенциалом Φ(x), а затем с lapse:

    T(x) = sqrt(1 + 2Φ(x)/c^2).

Слой задаёт:
- источники потенциала: ρ_mass и u_EM/c^2,
- уравнение Пуассона для Φ(x) (weak-field correspondence),
- интерпретацию: “энергия гравитирует” в смысле E/c^2,
- минимальный anchor-тест на сферически-симметричном распределении энергии.

Слой не выводит полную ковариантную динамику (уравнения Эйнштейна).
Это протокол weak-field согласования Gravity↔EM, аналогичный тому,
как EM layer постулирует динамическую часть уравнений Максвелла.

Справка по физике:
- В weak-field GR: Φ удовлетворяет уравнению Пуассона с источником плотности энергии,
  а T(x) связан с g_00: g_00 ≈ 1 + 2Φ/c^2. [Carroll, “Spacetime and Geometry”, Ch. 7]
- Плотность энергии EM поля: u_EM = (ε0 E^2 + B^2/μ0)/2. [Jackson, “Classical Electrodynamics”]


ОГЛАВЛЕНИЕ
----------
0. Интерфейс к слоям
1. Источники: масса и энергия
2. Weak-field: уравнение Пуассона для Φ(x)
3. Связь Φ(x) → T(x)
4. Пример: “масса поля” u_EM/c^2
5. Anchors
6. Открытые вопросы


================================================================================
0. ИНТЕРФЕЙС К СЛОЯМ
================================================================================

Core:
- факты и время через ticks в FactLog;
- T(x) влияет на локальные темпы через Gravity layer.

Gravity layer:
- задаёт T(x) = sqrt(1 + 2Φ/c^2) как weak-field correspondence.

EM layer:
- задаёт поля E, B и их gauge-инвариантные наблюдаемые.

Sources layer:
- задаёт, как находить Φ(x) из источников (weak-field).


================================================================================
1. ИСТОЧНИКИ: МАССА И ЭНЕРГИЯ
================================================================================

Определим:
- ρ_mass(x) — плотность массы (SI: kg/m^3)
- u_EM(x) — плотность энергии EM поля (SI: J/m^3)

Эквивалентная “плотность массы энергии”:

    ρ_EM(x) := u_EM(x) / c^2.   (SI: kg/m^3)

Плотность энергии EM поля:

    u_EM = (ε0 |E|^2 + |B|^2/μ0)/2.

Замечание:
Это gauge-инвариантная величина, выражается через поля E и B (EM layer).


================================================================================
2. WEAK-FIELD: УРАВНЕНИЕ ПУАССОНА ДЛЯ Φ(x)
================================================================================

POSTULATE S1 (Weak-field source rule):
Ньютоновский потенциал Φ(x) удовлетворяет:

    ∇^2 Φ(x) = 4π G ρ_total(x),

где

    ρ_total(x) = ρ_mass(x) + ρ_EM(x) + ρ_other(x).

Здесь ρ_other — любые другие вклады энергии/импульса, если добавятся слои
(например, давление/кинетика в более точной модели).

Комментарий:
Это ровно weak-field correspondence GR (не вывод из CCM Core).


================================================================================
3. СВЯЗЬ Φ(x) → T(x)
================================================================================

Используется интерфейс Gravity layer:

    T(x) = sqrt(1 + 2Φ(x)/c^2),  при |Φ|/c^2 << 1.

Тогда локальные темпы (ticks, Commit-скорости) масштабируются через T(x)
как в Gravity layer.


================================================================================
4. ПРИМЕР: “МАССА ПОЛЯ” u_EM/c^2
================================================================================

Если поле локализовано в объёме V и имеет энергию

    E_field = ∫_V u_EM(x) d^3x,

то weak-field источником является эквивалентная масса

    M_eq = E_field / c^2.

В сферически-симметричном случае u_EM = const внутри шара радиуса R:

    M_eq = (4π/3) R^3 (u_EM/c^2).

Потенциал вне шара (r ≥ R):

    Φ(r) = -G M_eq / r.

Потенциал в центре (r = 0) при однородной плотности:

    Φ(0) = -(3/2) G M_eq / R.

Это стандартная ньютоновская формула для однородного шара, где “масса”
может быть общей: обычная + эквивалентная (полевая).


================================================================================
5. ANCHORS
================================================================================

S01_SV_sources_em_energy_sphere.py
  - проверяет формулы для Φ(r) от однородной ρ_EM = u_EM/c^2 внутри шара,
  - отрицательный контроль: отключить ρ_EM и увидеть исчезновение вклада.

(См. файл теста в репозитории.)


================================================================================
6. ОТКРЫТЫЕ ВОПРОСЫ
================================================================================

[?] Полная ковариантная формулировка: источники через T_μν и уравнения Эйнштейна.
[?] Как в CCM корректно учитывать вклад давления/напряжений (не только u/c^2).
[?] Динамика источников: как поля/материя эволюционируют совместно с T(x).

================================================================================
END SOURCES LAYER v0.1
================================================================================